
\subsection{Data Samples}

The study uses proton-proton collision data collected by the ATLAS detector from 2015 through 2018, which represents an integrated luminosity of 139 $fb^{-1}$ \cite{lumi} and an energy of $\sqrt{s} = 13$ TeV. All data used in this analysis was included in one of the Good Run Lists verified by Data Quality checks \cite{PERF-2010-01}.

\subsection{Data Trigger}

Data events are required to be selected by dilepton triggers. The $p_T$ thresholds of the dilepton trigger on two electrons were 12 GeV in 2015, 17 GeV in 2016, and 24 GeV in 2017 and 2018, while for the dimuon triggers the $p_T$ thresholds on the leading (sub-leading) muon were 18 GeV (8 GeV) in 2015, and 22 GeV (8 GeV) in 2016-2018. For the electron+muon triggers, the $p_T$ thresholds on the electron (muon) were 17 GeV (14 GeV) for all datasets.

\subsection{Monte Carlo Samples}
\label{sec:MCsamples}

Several Monte Carlo (MC) generators were used to simulate both signal and background processes. For all of these, the effects of the ATLAS detector are simulated in \textsc{Geant4} \cite{GEANT4}. The specific event generator used for each of these MC samples is listed in Table \ref{tbl:evgen}. A Higgs mass of 125 GeV is assumed in all simulations.

\begin{table}[H]
\begin{center}                                                                                                                \caption{\label{tbl:evgen} The configurations used for event generation of signal and background processes, including the event generator, matrix element (ME) order, parton shower algorithm, and parton distribution functin (PDF). }
 \resizebox{\textwidth}{!}{ 
\begin{tabular}{llllll}
\hline\hline                                                                                                               
Process & Event generator & ME order & Parton Shower & PDF   \\
\hline
$t\bar{t}H$ & \textsc{MG5\_aMC} & NLO & \textsc{Pythia} 8\ & NNPDF 3.0 NLO \cite{Ball:2014uwa} \\                          
& (\textsc{MG5\_aMC}) & (NLO) & (\textsc{Herwig++}) & (CT10 \cite{ct10})  \\
$t\bar{t} W$ & \textsc{MG5\_aMC} & NLO & \textsc{Pythia} 8 & NNPDF 3.0 NLO \\
& (\textsc{Sherpa} 2.1.1) & (LO multileg) & (\textsc{Sherpa}) & (NNPDF 3.0 NLO)  \\
$t\bar{t} (Z/\gamma^* \to ll)$ & \textsc{MG5\_aMC} & NLO & \textsc{Pythia} 8 & NNPDF 3.0 NLO  \\
$VV$ & \textsc{Sherpa} 2.2.2 & MEPS NLO & \textsc{Sherpa} & CT10 \\
$t\bar{t}$ & \textsc{Powheg-BOX v2} \cite{powhegtt} & NLO & \textsc{Pythia} 8 & NNPDF 3.0 NLO  \\
$t\bar{t}\gamma$ & \textsc{MG5\_aMC} & LO & \textsc{Pythia} 8 & NNPDF 2.3 LO \\
$t Z$ & \textsc{MG5\_aMC} & LO & \textsc{Pythia} 6  & CTEQ6L1  \\
$tHqb$ & \textsc{MG5\_aMC} & LO & \textsc{Pythia} 8 & CT10  \\
$tHW$ & \textsc{MG5\_aMC} & NLO & \textsc{Herwig++}  & CT10  \\
& (\textsc{Sherpa} 2.1.1) & (LO multileg) & (\textsc{Sherpa}) & (NNPDF 3.0 NLO)  \\                                        
$t W Z$ & \textsc{MG5\_aMC} & NLO & \textsc{Pythia} 8 & NNPDF 2.3 LO   \\
$t\bar t t$, $t\bar t t\bar t$ & \textsc{MG5\_aMC} & LO & \textsc{Pythia} 8 & NNPDF 2.3 LO  \\                             
$t\bar t W^+ W^-$ & \textsc{MG5\_aMC} & LO & \textsc{Pythia} 8 & NNPDF 2.3 LO\\
$s$-, $t$-channel, & \textsc{Powheg-BOX v1} \cite{powhegstp}& NLO & \textsc{Pythia} 6 & CT10 \\
$Wt$ single top & & & &  \\
$qqVV$, $VVV$ & &   \\
$Z \to l^+l^-$ & \textsc{Sherpa} 2.2.1 & MEPS NLO  & \textsc{Sherpa} & NNPDF 3.0 NLO \\
\hline\hline
\end{tabular}
}
\end{center}
\end{table}

The $t\bar{t}H$ sample is modelled at NLO with \textsc{Powheg-BOX} v2 using the NNPDF2.0 parton distribution function (PDF) \cite{ATL-PHYS-PUB-2015-011}. Parton showering and hadronisation were modelled with \textsc{Pythia} 8.2 \cite{ATL-PHYS-PUB-2011-009}. The $t\bar{t}H$ sample is normalized to a cross-section of $507^{+35}_{-50}$ fb based on NLO calculations. Uncertainties are based on varying the QCD factorisation and renormalisation scale, as well as uncertainties in the PDF and $\alpha_s$.

The WZ signal samples are simulated using Sherpa 2.2.2 \cite{sherpa}. Signal events are generated using NNPDF30NNLO PDF set with up to one parton at NLO and 2 to 3 partons at LO \cite{Ball:2014uwa}. The tZ background is simulated at NLO with \textsc{MadGraph5\_aMC@NLO}, with \textsc{Pythia8} used to perform parton showering and fragmentation. The NNPDF30NNLO PDF set is used.

The $t\bar{t}W$ sample is simulated using Sherpa 2.2.1 with the NNPDF3.0 NLO PDF. The matrix element is calculated with up to one additional parton at NLO, and up to two at LO. As explained in detail in \cite{ttH_paper}, the $t\bar{t}W$ contribution predicted by MC is found disagree significantly with what is observed in data. While an effort is currently being undertaken to measure $t\bar{t}W$ more accurately, the approached used by the 79.8 $fb^{-1}$ $t\bar{t}H$ analysis is used here: A normalization factor of 1.68 is applied to the MC estimate of $t\bar{t}W$ and additional systematic uncertainties on $t\bar{t}W$ are included to account for this modelling descrepency, as outlined in Section \ref{sec:sys}.

The $t\bar{t}(Z/\gamma^*)$ process is simulated with the \textsc{MadGraph5\_aMC@NLO} generator, using NNPDF3.0. Diboson processes are generated with \textsc{Sherpa} 2.2.2 at NLO precision for one extra parton, and at LO for up to three extra partons.

The ``fake'', or non-prompt, background comes primarily from leptons originating from hadron decays, leptons with missidentified charge,and photon conversions. While the main $t\bar{t}H$ analysis is currently refining a data-driven approach for estimating the contribution of events with non-prompt leptons, at the time of this note this strategy has not been completely developed for the full Run-2 dataset. Therefore, the non-prompt contribution is estimated with MC, while applying normalization corrections and systematic uncertainties derived from data driven techniques developed for the 79.8 $fb^{-1}$ $t\bar{t}H/t\bar{t}W$ analysis \cite{ttH_paper}. 

The primary contribution to the non-prompt lepton background is from $t\bar{t}$ production, with $V$+jets and single-top as much smaller sources. Estimation of this background is done primarily using an inclusive $t\bar{t}$ sample, with corrections applied based on data driven methods. This sample is generated using \textsc{Powheg}, with \textsc{Pythia8} performing the parton shower and fragmentation. Likelihood fits over several control regions enriched with these non-prompt backgrounds are fit to data in order to derive normalization factors for these backgrounds. The specific normalization factors and uncertainties applied to the non-prompt contributions are listed in Section \ref{sec:sys}.

Other processes, such as $tH$, $tZ$, $t\bar{t}WW$ and $t\bar{t}t\bar{t}$, are expected to make minor contributions to the total background. The generators and setting used for these backgrounds are summarized in Table \ref{tbl:evgen}.

